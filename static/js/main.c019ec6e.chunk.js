(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(326)},320:function(e,t,a){},321:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),s=a.n(l),i=(a(33),a(2)),c=a(3),u=a(5),o=a(4),m=a(6),h=a(329),p=a(330),d=a(328),g=a(20),f=a(24),v=function(){var e=Object(f.a)(!1);return r.a.createElement("div",{className:"footer fixed w-screen flex items-center justify-between flex-wrap p-6"},r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){document.querySelector("nav").scrollIntoView({behavior:"smooth"})},className:"outline-none pb-5"},r.a.createElement(g.ArrowUp,{className:"whiteInDarkMode"})),r.a.createElement("br",null),r.a.createElement("button",{onClick:e.toggle,className:"outline-none"},r.a.createElement(g.Moon,{className:"whiteInDarkMode"}))),r.a.createElement("div",null))},b=a(11),y=a.n(b),E=a(12),k=a(331),w=a(9),j=a(327),O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).openLink=a.openLink.bind(Object(w.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"openLink",value:function(){this.props.history.push("/wiki/"+encodeURIComponent(this.props.result.title)+"/"+this.props.language),this.props.setQuery("")}},{key:"render",value:function(){var e=this.props.result;return r.a.createElement("div",{key:e.title},r.a.createElement("div",{className:"result overflow-hidden h-48 p-4 flex mb-12 no-underline color-inherit cursor-pointer",onClick:this.openLink},r.a.createElement("div",{className:"result-img-container"},r.a.createElement("img",{className:"result-img h-32 pr-12",src:e.image,alt:""})),r.a.createElement("div",{className:"result-text-container"},r.a.createElement("h4",null,e.title),r.a.createElement("p",{className:"text-grey text-xs leading-loose"},e.text))))}}]),t}(n.Component),x=Object(k.a)(O),N=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.results,a="Let me ask Wikipedia for that...";return 0===this.props.totalResults&&(a="I could not find any results"),r.a.createElement("div",{className:"absolute results mt-10 bg-main w-1/2 md:w-1/3"},Object.keys(t).length>0?Object.keys(t).map(function(a){return r.a.createElement(x,{key:t[a].title,result:t[a],setQuery:e.props.setQuery,language:e.props.language})}):r.a.createElement("div",{className:"result overflow-hidden h-48 p-4 flex mb-12 no-underline color-inherit"},r.a.createElement("div",{className:"w-100"},r.a.createElement("p",{className:"font-light"},a))))}}]),t}(n.Component),S=a(13),C=a.n(S);function L(e,t,a){return q.apply(this,arguments)}function q(){return(q=Object(E.a)(y.a.mark(function e(t,a,n){var r,l,s,i,c,u,o=arguments;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>3&&void 0!==o[3]?o[3]:"en",a({totalResults:10}),e.next=4,C()({apiUrl:"https://".concat(r,".wikipedia.org/w/api.php")}).search(t);case 4:if(l=e.sent.results,t!==n().query){e.next=10;break}for(a({results:{},totalResults:l.length}),s=0;s<10&&s<l.length;s++)(i=n().results)[s]={title:l[s],image:"",text:"Loading details..."},a({results:i});e.next=11;break;case 10:return e.abrupt("return");case 11:for(c=function(e){C()({apiUrl:"https://".concat(r,".wikipedia.org/w/api.php")}).page(l[e]).then(function(){var r=Object(E.a)(y.a.mark(function r(s){var i,c,u,o;return y.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.mainImage();case 2:return i=r.sent,r.next=5,s.summary();case 5:c=r.sent,u={title:l[e],image:i,text:c},t===n().query&&((o=n().results)[e]=u,a({results:o}));case 8:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}())},u=0;u<10&&u<l.length;u++)c(u);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}var U=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={query:"",results:{},totalResults:10},a.handleSearchUpdate=a.handleSearchUpdate.bind(Object(w.a)(a)),a.setQuery=a.setQuery.bind(Object(w.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSearchUpdate",value:function(e){var t=e.target.value;this.setQuery(t)}},{key:"setQuery",value:function(e){var t=this;this.setState({query:e}),L(e,function(e){t.setState(e)},function(){return t.state},this.props.language)}},{key:"render",value:function(){return r.a.createElement("nav",{className:"header flex items-center justify-between flex-wrap p-6 w-full"},r.a.createElement("div",{className:"md:w-1/3"}),r.a.createElement(j.a,{to:"/",className:"w-1/4 md:w-1/3 no-underline flex justify-left md:justify-center"},r.a.createElement("span",{className:"font-light"},"minimal"),r.a.createElement("span",{className:"font-normal"},"pedia")),r.a.createElement("div",{className:"w-1/2 md:w-1/3"},r.a.createElement("input",{type:"text",className:"w-full md:w-3/4 outline-none bg-transparent float-right",placeholder:"Search...",onChange:this.handleSearchUpdate,value:this.state.query}),""!==this.state.query&&r.a.createElement(N,{results:this.state.results,totalResults:this.state.totalResults,setQuery:this.setQuery,language:this.props.language})))}}]),t}(n.Component),R=(a(320),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={image:"",title:""},a.sidebar=r.a.createRef(),a.text=r.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.article,t=this.props.match.params.language?this.props.match.params.language:"en";this.getData(e,t)}},{key:"componentDidUpdate",value:function(e){if(this.props.location!==e.location){this.sidebar.current.innerHTML="",this.text.current.innerHTML="Getting your article from Wikipedia...",this.setState({image:""});var t=this.props.match.params.article,a=this.props.match.params.language?this.props.match.params.language:"en";this.getData(t,a)}}},{key:"getData",value:function(){var e=Object(E.a)(y.a.mark(function e(t,a){var n,r=this;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=decodeURIComponent(t),this.setState({title:t}),document.title=t.replace(/_/g," ")+" - minimalpedia",n=setTimeout(function(){r.text.current.innerHTML="Still loading the article from Wikipedia..."},1e4),C()({apiUrl:"https://".concat(a,".wikipedia.org/w/api.php")}).page(t).then(function(e){e.mainImage().then(function(e){r.setState({image:e})}),e.html().then(function(e){clearTimeout(n),r.processHtml(e)})}).catch(function(e){clearTimeout(n),"Error: No article found"===String(e)&&(e="Sorry, but we couldn't find this article on Wikipedia"),r.text.current.innerHTML=e});case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"processHtml",value:function(e){var t=this,a=(new DOMParser).parseFromString("<div>"+e+"</div>","text/html");a.querySelectorAll("a").forEach(function(e){var a=e.getAttribute("href");e.addEventListener("click",function(e){if(e.preventDefault(),/^\/wiki\/.*/.test(a)){var n=encodeURIComponent(a.substr(6)),r=t.props.match.params.language?t.props.match.params.language:"en";t.props.history.push("/wiki/"+n+"/"+r)}else if("#"===a.charAt(0))document.querySelector(a).scrollIntoView({behavior:"smooth"});else{window.open(a,"_blank").focus()}})});var n=a.querySelectorAll('[style]:not([style=""]');if(n){var r=/(background(-color)?|border(-[^:]*)?|color):.*?(;|$)/gi;n.forEach(function(e){var t=e.getAttribute("style");t=t.replace(r,""),e.setAttribute("style",t)})}var l=a.querySelectorAll("table.infobox")[0];if(l){var s=l.querySelectorAll(".image");s&&s.forEach(function(e){e.remove()}),l.removeAttribute("style");var i=l.querySelectorAll('[style]:not([style=""]');i&&i.forEach(function(e){e.removeAttribute("style")});var c=0;l.querySelectorAll("tr").forEach(function(e){if(!(c<2))return!1;e.remove(),c++}),this.sidebar.current.innerHTML="",this.sidebar.current.appendChild(l)}var u=a.querySelectorAll("div")[0];u.querySelectorAll(".mw-editsection").forEach(function(e){e.remove()}),this.text.current.innerHTML="",this.text.current.appendChild(u)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(U,{language:this.props.match.params.language?this.props.match.params.language:"en"}),r.a.createElement("div",{className:"md:flex md:min-h-screen article"},r.a.createElement("div",{className:"w-screen md:min-h-screen md:w-1/3 pl-16 p-6 sidebar"},r.a.createElement("img",{className:"w-100",src:this.state.image,alt:""}),r.a.createElement("div",{className:"sidebar-table",ref:this.sidebar})),r.a.createElement("div",{className:"w-screen md:w-2/3 pl-16 md:pl-6 p-6 info"},r.a.createElement("h2",null,this.state.title.replace(/_/g," ")),r.a.createElement("div",{ref:this.text},"Getting your article from Wikipedia..."))))}}]),t}(n.Component)),A=Object(k.a)(R),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={query:""},a.updateQuery=a.updateQuery.bind(Object(w.a)(a)),a.handleLanguageChange=a.handleLanguageChange.bind(Object(w.a)(a)),a.searchbox=r.a.createRef(),a.language=r.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"updateQuery",value:function(e){this.setState({query:e.target.value}),this.props.onChange(e.target.value)}},{key:"handleLanguageChange",value:function(e){this.props.onLanguageChange(e.target.value),this.language.current.blur()}},{key:"componentDidMount",value:function(){this.searchbox.current.focus()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"head px-16 "+(this.props.expanded?"pt-32":"pt-10")},r.a.createElement("div",{className:"heading text-center text-2xl"},r.a.createElement("span",{className:"font-light"},"minimal"),r.a.createElement("span",{className:"font-normal"},"pedia")),r.a.createElement("div",{className:"search "+(this.props.expanded?"pt-32":"pt-4")},r.a.createElement("select",{className:"w-full outline-none bg-transparent whiteInDarkMode language-select "+(this.props.expanded?"":"hidden"),onChange:this.handleLanguageChange,ref:this.language,value:this.props.language},this.props.availibleLanguages.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.name)})),r.a.createElement("input",{type:"text",className:"search-box h-24 w-full outline-none text-5xl font-bold bg-transparent",placeholder:"Search...",value:this.state.query,onChange:this.updateQuery,ref:this.searchbox,autoFocus:!0}))))}}]),t}(n.Component),M=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.result;return r.a.createElement("div",{key:e.title},r.a.createElement(j.a,{to:"/wiki/"+encodeURIComponent(e.title)+"/"+this.props.language,className:"result overflow-hidden h-48 p-4 flex mb-12 no-underline color-inherit"},r.a.createElement("div",{className:"result-img-container"},r.a.createElement("img",{className:"result-img h-32 pr-12",src:e.image,alt:""})),r.a.createElement("div",{className:"result-text-container"},r.a.createElement("h2",null,e.title),r.a.createElement("p",{className:"text-grey text-xs leading-loose"},e.text))))}}]),t}(n.Component),Q=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.results,a="Let me ask Wikipedia for that...";return 0===this.props.totalResults&&(a="I could not find any results"),r.a.createElement("div",{className:"results px-16 mt-3 display-none",id:"results"},Object.keys(t).length>0?Object.keys(t).map(function(a){return r.a.createElement(M,{key:t[a].title,result:t[a],language:e.props.language})}):r.a.createElement("div",{className:"result overflow-hidden h-48 p-4 flex mb-12 no-underline color-inherit"},r.a.createElement("div",{className:"w-100"},r.a.createElement("h2",{className:"font-light"},a))))}}]),t}(n.Component),D=[{name:"english",value:"en"},{name:"deutsch",value:"de"},{name:"espa\xf1ol",value:"es"},{name:"italiano",value:"it"},{name:"\u65e5\u672c\u8a9e",value:"ja"},{name:"polski",value:"pl"},{name:"p\u0443\u0441\u0441\u043a\u0438\u0439",value:"ru"},{name:"fran\xe7ais",value:"fr"},{name:"nederlands",value:"nl"},{name:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",value:"ar"},{name:"dansk",value:"da"},{name:"portugu\xeas",value:"pt"},{name:"t\xfcrk\xe7e",value:"tr"},{name:"\u4e2d\u6587",value:"zh"}],T=(a(321),function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={query:"",languages:[],language:"en",results:{},totalResults:10},a.state.languages=D;var n=navigator.language.substr(0,2);return a.state.languages.find(function(e){return e.value===n})&&(a.state.language=n),a.handleSearchUpdate=a.handleSearchUpdate.bind(Object(w.a)(a)),a.handleLanguageUpdate=a.handleLanguageUpdate.bind(Object(w.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.title="minimalpedia"}},{key:"handleSearchUpdate",value:function(e){var t=this;this.setState({query:e}),L(e,function(e){t.setState(e)},function(){return t.state},this.state.language)}},{key:"handleLanguageUpdate",value:function(e){this.setState({language:e})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I,{expanded:""===this.state.query,onChange:this.handleSearchUpdate,onLanguageChange:this.handleLanguageUpdate,language:this.state.language,availibleLanguages:this.state.languages}),""!==this.state.query&&r.a.createElement(Q,{results:this.state.results,totalResults:this.state.totalResults,language:this.state.language}))}}]),t}(n.Component)),H=function(e){return r.a.createElement(h.a,e,r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(d.a,{path:"/wiki/:article?/:language?",component:A}),r.a.createElement(d.a,{path:"/",component:T})),r.a.createElement(v,null)))},W=(a(322),a(323),a(324),a(325),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(H,null)}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},33:function(e,t,a){}},[[28,1,2]]]);
//# sourceMappingURL=main.c019ec6e.chunk.js.map