(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(326)},320:function(e,t,a){},321:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),l=a.n(i),s=(a(33),a(2)),c=a(3),o=a(5),u=a(4),m=a(6),h=a(329),p=a(330),d=a(328),f=a(20),v=a(24),b=function(){var e=Object(v.a)(!1);return r.a.createElement("div",{className:"footer fixed w-screen flex items-center justify-between flex-wrap p-6"},r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){document.querySelector("nav").scrollIntoView({behavior:"smooth"})},className:"outline-none pb-5"},r.a.createElement(f.ArrowUp,{className:"whiteInDarkMode"})),r.a.createElement("br",null),r.a.createElement("button",{onClick:e.toggle,className:"outline-none"},r.a.createElement(f.Moon,{className:"whiteInDarkMode"}))),r.a.createElement("div",null))},y=a(11),E=a.n(y),g=a(12),w=a(331),k=a(10),j=a(327),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).openLink=a.openLink.bind(Object(k.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"openLink",value:function(){this.props.history.push("/wiki/"+encodeURIComponent(this.props.result.title)),this.props.setQuery("")}},{key:"render",value:function(){var e=this.props.result;return r.a.createElement("div",{key:e.title},r.a.createElement("div",{className:"result overflow-hidden h-48 p-4 flex mb-12 no-underline color-inherit cursor-pointer",onClick:this.openLink},r.a.createElement("div",{className:"result-img-container"},r.a.createElement("img",{className:"result-img h-32 pr-12",src:e.image,alt:""})),r.a.createElement("div",{className:"result-text-container"},r.a.createElement("h4",null,e.title),r.a.createElement("p",{className:"text-grey text-xs leading-loose"},e.text))))}}]),t}(n.Component),x=Object(w.a)(O),N=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.results,a="Let me ask Wikipedia for that...";return 0===this.props.totalResults&&(a="I could not find any results"),r.a.createElement("div",{className:"absolute results mt-10 bg-main w-1/2 md:w-1/3"},Object.keys(t).length>0?Object.keys(t).map(function(a){return r.a.createElement(x,{key:t[a].title,result:t[a],setQuery:e.props.setQuery})}):r.a.createElement("div",{className:"result overflow-hidden h-48 p-4 flex mb-12 no-underline color-inherit"},r.a.createElement("div",{className:"w-100"},r.a.createElement("p",{className:"font-light"},a))))}}]),t}(n.Component),S=a(13),q=a.n(S);function C(e,t,a){return R.apply(this,arguments)}function R(){return(R=Object(g.a)(E.a.mark(function e(t,a,n){var r,i,l,s,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a({totalResults:10}),e.next=3,q()({apiUrl:"https://en.wikipedia.org/w/api.php"}).search(t);case 3:if(r=e.sent.results,t!==n().query){e.next=9;break}for(a({results:{},totalResults:r.length}),i=0;i<10&&i<r.length;i++)(l=n().results)[i]={title:r[i],image:"",text:"Loading details..."},a({results:l});e.next=10;break;case 9:return e.abrupt("return");case 10:for(s=function(e){q()({apiUrl:"https://en.wikipedia.org/w/api.php"}).page(r[e]).then(function(){var i=Object(g.a)(E.a.mark(function i(l){var s,c,o,u;return E.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,l.mainImage();case 2:return s=i.sent,i.next=5,l.summary();case 5:c=i.sent,o={title:r[e],image:s,text:c},t===n().query&&((u=n().results)[e]=o,a({results:u}));case 8:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}())},c=0;c<10&&c<r.length;c++)s(c);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var U=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={query:"",results:{},totalResults:10},a.handleSearchUpdate=a.handleSearchUpdate.bind(Object(k.a)(a)),a.setQuery=a.setQuery.bind(Object(k.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSearchUpdate",value:function(e){var t=e.target.value;this.setQuery(t)}},{key:"setQuery",value:function(e){var t=this;this.setState({query:e}),C(e,function(e){t.setState(e)},function(){return t.state})}},{key:"render",value:function(){return r.a.createElement("nav",{className:"header flex items-center justify-between flex-wrap p-6 w-full"},r.a.createElement("div",{className:"md:w-1/3"}),r.a.createElement(j.a,{to:"/",className:"w-1/4 md:w-1/3 no-underline flex justify-left md:justify-center"},r.a.createElement("span",{className:"font-light"},"minimal"),r.a.createElement("span",{className:"font-normal"},"pedia")),r.a.createElement("div",{className:"w-1/2 md:w-1/3"},r.a.createElement("input",{type:"text",className:"w-full md:w-3/4 outline-none bg-transparent float-right",placeholder:"Search...",onChange:this.handleSearchUpdate,value:this.state.query}),""!==this.state.query&&r.a.createElement(N,{results:this.state.results,totalResults:this.state.totalResults,setQuery:this.setQuery})))}}]),t}(n.Component),A=(a(320),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={image:"",title:""},a.sidebar=r.a.createRef(),a.text=r.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.article;this.getData(e)}},{key:"componentDidUpdate",value:function(e){if(this.props.location!==e.location){this.sidebar.current.innerHTML="",this.text.current.innerHTML="Getting your article from Wikipedia...",this.setState({image:""});var t=this.props.match.params.article;this.getData(t)}}},{key:"getData",value:function(){var e=Object(g.a)(E.a.mark(function e(t){var a,n=this;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=decodeURIComponent(t),this.setState({title:t}),document.title=t.replace(/_/g," ")+" - minimalpedia",a=setTimeout(function(){n.text.current.innerHTML="Still loading the article from Wikipedia..."},1e4),q()({apiUrl:"https://en.wikipedia.org/w/api.php"}).page(t).then(function(e){e.mainImage().then(function(e){n.setState({image:e})}),e.html().then(function(e){clearTimeout(a),n.processHtml(e)})}).catch(function(e){clearTimeout(a),"Error: No article found"===String(e)&&(e="Sorry, but we couldn't find this article on Wikipedia"),n.text.current.innerHTML=e});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"processHtml",value:function(e){var t=this,a=(new DOMParser).parseFromString("<div>"+e+"</div>","text/html");a.querySelectorAll("a").forEach(function(e){var a=e.getAttribute("href");e.addEventListener("click",function(e){if(e.preventDefault(),/^\/wiki\/.*/.test(a)){var n=encodeURIComponent(a.substr(6));t.props.history.push("/wiki/"+n)}else if("#"===a.charAt(0))document.querySelector(a).scrollIntoView({behavior:"smooth"});else{window.open(a,"_blank").focus()}})});var n=a.querySelectorAll('[style]:not([style=""]');if(n){var r=/(background(-color)?|border(-[^:]*)?|color):.*?(;|$)/gi;n.forEach(function(e){var t=e.getAttribute("style");t=t.replace(r,""),e.setAttribute("style",t)})}var i=a.querySelectorAll("table.infobox")[0];if(i){var l=i.querySelectorAll(".image");l&&l.forEach(function(e){e.remove()}),i.removeAttribute("style");var s=i.querySelectorAll('[style]:not([style=""]');s&&s.forEach(function(e){e.removeAttribute("style")});var c=0;i.querySelectorAll("tr").forEach(function(e){if(!(c<2))return!1;e.remove(),c++}),this.sidebar.current.innerHTML="",this.sidebar.current.appendChild(i)}var o=a.querySelectorAll("div")[0];o.querySelectorAll(".mw-editsection").forEach(function(e){e.remove()}),this.text.current.innerHTML="",this.text.current.appendChild(o)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement("div",{className:"md:flex md:min-h-screen article"},r.a.createElement("div",{className:"w-screen md:min-h-screen md:w-1/3 pl-16 p-6 sidebar"},r.a.createElement("img",{className:"w-100",src:this.state.image,alt:""}),r.a.createElement("div",{className:"sidebar-table",ref:this.sidebar})),r.a.createElement("div",{className:"w-screen md:w-2/3 pl-16 md:pl-6 p-6 info"},r.a.createElement("h2",null,this.state.title.replace(/_/g," ")),r.a.createElement("div",{ref:this.text},"Getting your article from Wikipedia..."))))}}]),t}(n.Component)),L=Object(w.a)(A),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={query:""},a.updateQuery=a.updateQuery.bind(Object(k.a)(a)),a.searchbox=r.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"updateQuery",value:function(e){this.setState({query:e.target.value}),this.props.onChange(e.target.value)}},{key:"componentDidMount",value:function(){this.searchbox.current.focus()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"head px-16 "+(this.props.expanded?"pt-32":"pt-10")},r.a.createElement("div",{className:"heading text-center text-2xl"},r.a.createElement("span",{className:"font-light"},"minimal"),r.a.createElement("span",{className:"font-normal"},"pedia")),r.a.createElement("div",{className:"search "+(this.props.expanded?"pt-32":"")},r.a.createElement("input",{type:"text",className:"search-box h-48 w-full outline-none text-5xl font-bold bg-transparent",placeholder:"Search...",value:this.state.query,onChange:this.updateQuery,ref:this.searchbox,autoFocus:!0}))))}}]),t}(n.Component),M=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.result;return r.a.createElement("div",{key:e.title},r.a.createElement(j.a,{to:"/wiki/"+encodeURIComponent(e.title),className:"result overflow-hidden h-48 p-4 flex mb-12 no-underline color-inherit"},r.a.createElement("div",{className:"result-img-container"},r.a.createElement("img",{className:"result-img h-32 pr-12",src:e.image,alt:""})),r.a.createElement("div",{className:"result-text-container"},r.a.createElement("h2",null,e.title),r.a.createElement("p",{className:"text-grey text-xs leading-loose"},e.text))))}}]),t}(n.Component),Q=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.results,t="Let me ask Wikipedia for that...";return 0===this.props.totalResults&&(t="I could not find any results"),r.a.createElement("div",{className:"results px-16 mt-3 display-none",id:"results"},Object.keys(e).length>0?Object.keys(e).map(function(t){return r.a.createElement(M,{key:e[t].title,result:e[t]})}):r.a.createElement("div",{className:"result overflow-hidden h-48 p-4 flex mb-12 no-underline color-inherit"},r.a.createElement("div",{className:"w-100"},r.a.createElement("h2",{className:"font-light"},t))))}}]),t}(n.Component),D=(a(321),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={query:"",results:{},totalResults:10},a.handleSearchUpdate=a.handleSearchUpdate.bind(Object(k.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.title="minimalpedia"}},{key:"handleSearchUpdate",value:function(e){var t=this;this.setState({query:e}),C(e,function(e){t.setState(e)},function(){return t.state})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I,{expanded:""===this.state.query,onChange:this.handleSearchUpdate}),""!==this.state.query&&r.a.createElement(Q,{results:this.state.results,totalResults:this.state.totalResults}))}}]),t}(n.Component)),T=function(e){return r.a.createElement(h.a,e,r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(d.a,{path:"/wiki/:article",component:L}),r.a.createElement(d.a,{path:"/",component:D})),r.a.createElement(b,null)))},H=(a(322),a(323),a(324),a(325),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(T,null)}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},33:function(e,t,a){}},[[28,1,2]]]);
//# sourceMappingURL=main.f98dc79c.chunk.js.map